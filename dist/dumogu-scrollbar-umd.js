/*!
 * dumogu-scrollbar v0.0.1
 * Copyright 2025 wuzhanggui https://github.com/wurencaideli
 * Licensed under MIT
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self)["dumogu-scrollbar"]={})}(this,function(t){"use strict";class e{isMounted=!0;isDestroyed=!1;constructor(){}destroy(){this.isDestroyed=!0}mount(){this.isMounted=!0}unmount(){this.isMounted=!1}}class s extends e{isX;keepShow=!1;stopClickPropagation=!1;targetEl;railEl;railContainerEl;thumbEl;isDragging=!1;isTransitioning=!1;isHover=!1;startX=0;startY=0;handleMousedown_;handleMouseMove_;handleMouseUp_;handleClick_;handleScroll_;handleMouseEnter_;handleMouseLeave_;constructor(t,e){super(),this.targetEl=t,this.isX=e.isX,this.keepShow=e.keepShow,this.stopClickPropagation=e.stopClickPropagation,this.railEl=document.createElement("div"),this.railContainerEl=document.createElement("div"),this.thumbEl=document.createElement("div"),this.railEl.classList.add("dumogu-scrollbar-target-rail"),this.railContainerEl.classList.add("dumogu-scrollbar-target-rail-container"),this.thumbEl.classList.add("dumogu-scrollbar-target-thumb"),this.railEl.classList.add("hidden"),this.railEl.classList.add(this.isX?"x":"y"),this.railContainerEl.classList.add(this.isX?"x":"y"),this.thumbEl.classList.add(this.isX?"x":"y"),this.keepShow&&this.railEl.classList.add("keep-show"),this.railEl.appendChild(this.railContainerEl),this.railContainerEl.appendChild(this.thumbEl),this.addEventListener()}updateStyle(){if(!this.isMounted||this.isDestroyed)return;const t=this.targetEl,e=this.railEl,s=this.thumbEl;let i=0;if(this.isX){i=t.offsetWidth/t.scrollWidth;const e=t.scrollLeft/t.scrollWidth;s.style.width=100*i+"%",s.style.left=100*e+"%"}else{i=t.offsetHeight/t.scrollHeight;const e=t.scrollTop/t.scrollHeight;s.style.height=Math.min(100*i,100)+"%",s.style.top=Math.min(100*e,100)+"%"}i>=1?e.classList.add("hidden"):(e.classList.remove("hidden"),this.isDragging?e.classList.add("dragging"):e.classList.remove("dragging"),this.isHover?e.classList.add("hover"):e.classList.remove("hover"))}handleMousedown(t){this.isMounted&&!this.isDestroyed&&(this.isDragging=!0,this.startX=t.x,this.startY=t.y)}handleMouseMove(t){if(!this.isMounted||this.isDestroyed)return;if(!this.isDragging)return;const e=this.targetEl,s=this.railContainerEl.getBoundingClientRect(),i=e.getBoundingClientRect();if(this.isX){const l=t.x,n=l-this.startX;if(this.startX=l,0==e.scrollLeft&&l<s.x)return;if(e.scrollLeft+i.width>=e.scrollWidth&&l>=s.x+s.width)return;e.scrollLeft=e.scrollLeft+n/s.width*e.scrollWidth}else{const l=t.y,n=l-this.startY;if(this.startY=l,0==e.scrollTop&&l<s.y)return;if(e.scrollTop+i.height>=e.scrollHeight&&l>=s.y+s.height)return;e.scrollTop=e.scrollTop+n/s.height*e.scrollHeight}}handleMouseUp(t){this.isMounted&&!this.isDestroyed&&(this.isDragging=!1)}handleScroll(t){this.isMounted&&!this.isDestroyed&&this.updateStyle()}handleClick(t){this.stopClickPropagation&&t.stopPropagation();const e=this.targetEl,s=this.thumbEl.getBoundingClientRect(),i=e.getBoundingClientRect();this.isX?(t.x<s.x&&(e.scrollLeft=e.scrollLeft-i.width),t.x>s.x+s.width&&(e.scrollLeft=e.scrollLeft+i.width)):(t.y<s.y&&(e.scrollTop=e.scrollTop-i.height),t.y>s.y+s.height&&(e.scrollTop=e.scrollTop+i.height))}handleMouseEnter(){this.isHover=!0,this.updateStyle()}handleMouseLeave(){this.isHover=!1,this.updateStyle()}handleTransitionStart(){this.isTransitioning=!0,this.updateStyle()}handleTransitionEnd(){this.isTransitioning=!1,this.updateStyle()}addEventListener(){this.removeEventListener();const t=this.targetEl,e=this.railEl,s=this.thumbEl,i=this.railContainerEl,l=this;l.handleMousedown_=function(t){l.handleMousedown(t)},l.handleMouseMove_=function(t){l.handleMouseMove(t)},l.handleMouseUp_=function(t){l.handleMouseUp(t)},l.handleScroll_=function(t){l.handleScroll(t)},l.handleClick_=function(t){l.handleClick(t)},l.handleMouseEnter_=function(t){l.handleMouseEnter(t)},l.handleMouseLeave_=function(t){l.handleMouseLeave(t)},l.handleTransitionStart_=function(t){l.handleTransitionStart(t)},l.handleTransitionEnd_=function(t){l.handleTransitionEnd(t)},s.addEventListener("mousedown",l.handleMousedown_),document.addEventListener("mousemove",l.handleMouseMove_),document.addEventListener("mouseup",l.handleMouseUp_),i.addEventListener("click",l.handleClick_),t.addEventListener("scroll",l.handleScroll_),e.addEventListener("mouseenter",l.handleMouseEnter_),e.addEventListener("mouseleave",l.handleMouseLeave_),e.addEventListener("transitionstart",l.handleTransitionStart_),e.addEventListener("transitionend",l.handleTransitionEnd_)}removeEventListener(){const t=this.targetEl,e=this.thumbEl,s=this.railContainerEl;e.removeEventListener("mousedown",this.handleMousedown_),document.removeEventListener("mousemove",this.handleMouseMove_),document.removeEventListener("mouseup",this.handleMouseUp_),s.removeEventListener("click",this.handleClick_),t.removeEventListener("scroll",this.handleScroll_),t.removeEventListener("mouseenter",this.handleMouseEnter_),t.removeEventListener("mouseleave",this.handleMouseLeave_)}destroy(){this.unmount(),this.removeEventListener(),this.railEl=void 0,this.railContainerEl=void 0,this.thumbEl=void 0,this.isDestroyed=!0}}class i extends e{targetEl;scrollbarEl;scrollbarTargetEl;constructor(t,e){super(),this.targetEl=t,this.scrollbarEl=document.createElement("div"),this.scrollbarTargetEl=document.createElement("div"),this.scrollbarEl.classList.add("dumogu-scrollbar"),this.scrollbarTargetEl.classList.add("dumogu-scrollbar-target")}updateStyle(t){if(!this.isMounted||this.isDestroyed)return;const e=this.targetEl,s=this.scrollbarTargetEl,i=t.targetElRect||e.getBoundingClientRect();s.style.width=i.width+"px",s.style.height=i.height+"px",s.style.top=i.y+"px",s.style.left=i.x+"px"}destroy(){this.unmount(),this.targetEl=void 0,this.scrollbarEl=void 0,this.scrollbarTargetEl=void 0,this.isDestroyed=!0}}t.DumoguScrollbar=class extends e{targetEl;scrollbar;railX;railY;isHover=!1;handleMouseEnter_;handleMouseLeave_;handleTransitionEnd_;isAutoUnmount=!1;constructor(t,e={}){super(),this.isAutoUnmount=e.isAutoUnmount,this.targetEl=t,this.scrollbar=new i(t),this.railX=new s(t,{isX:!0,keepShow:e.keepShow,stopClickPropagation:e.stopClickPropagation}),this.railY=new s(t,{isX:!1,keepShow:e.keepShow,stopClickPropagation:e.stopClickPropagation});const l=this.scrollbar.scrollbarEl,n=this.scrollbar.scrollbarTargetEl;n.appendChild(this.railX.railEl),n.appendChild(this.railY.railEl),l.appendChild(n);const o=this;this.handleMouseEnter_=function(){o.handleMouseEnter()},this.handleMouseLeave_=function(){o.handleMouseLeave()},this.handleMouseLeave_=function(){o.handleMouseLeave()},this.handleTransitionEnd_=function(){o.handleTransitionEnd()},t.addEventListener("mouseenter",this.handleMouseEnter_),t.addEventListener("mouseleave",this.handleMouseLeave_),this.railX.railEl.addEventListener("transitionend",this.handleTransitionEnd_),this.railY.railEl.addEventListener("transitionend",this.handleTransitionEnd_),this.mount(),this.updateStyle()}handleMouseEnter(){this.isHover=!0,this.autoUnmount(),this.updateStyle()}handleMouseLeave(){this.isHover=!1,this.updateStyle()}handleTransitionEnd(){this.autoUnmount()}updateStyle(){if(!this.isMounted||this.isDestroyed)return;const t=this.targetEl.getBoundingClientRect();this.scrollbar.updateStyle({targetElRect:t}),this.railX.updateStyle({targetElRect:t}),this.railY.updateStyle({targetElRect:t}),this.isHover?(this.railX.railEl.classList.add("target-hover"),this.railY.railEl.classList.add("target-hover")):(this.railY.railEl.classList.remove("target-hover"),this.railX.railEl.classList.remove("target-hover"))}mount(){document.body.appendChild(this.scrollbar.scrollbarEl),this.isMounted=!0}unmount(){var t;(t=this.scrollbar.scrollbarEl)&&t.parentNode&&t.parentNode.removeChild(t),this.isMounted=!1}autoUnmount(){if(!this.isAutoUnmount)return;if(this.isDestroyed)return;let t=!0,e=!0;this.isHover||this.railX.isTransitioning||this.railX.isDragging||this.railX.isHover||(t=!1),this.isHover||this.railY.isTransitioning||this.railY.isDragging||this.railY.isHover||(e=!1),t||e?this.mount():this.unmount()}destroy(){this.unmount(),this.scrollbar.destroy(),this.railX.destroy(),this.railY.destroy(),this.targetEl.removeEventListener("mouseenter",this.handleMouseEnter),this.targetEl.removeEventListener("mouseleave",this.handleMouseLeave),this.targetEl=void 0,this.scrollbar=void 0,this.railX=void 0,this.railY=void 0,this.isDestroyed=!0}}});
//# sourceMappingURL=dumogu-scrollbar-umd.js.map
