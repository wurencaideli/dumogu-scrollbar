{"version":3,"file":"dumogu-scrollbar.esm.js","sources":["../src/common.js","../src/rail.js","../src/index.js"],"sourcesContent":["/** 从文档上清除一个元素 */\nexport function removeElement(element) {\n    if (element && element.parentNode) {\n        element.parentNode.removeChild(element);\n    }\n}\nexport class BaseTools {\n    isMounted = false;\n    isDestroyed = false;\n    constructor() {}\n    destroy() {\n        this.isDestroyed = true;\n    }\n    mount() {\n        this.isMounted = true;\n    }\n    unmount() {\n        this.isMounted = false;\n    }\n}\n","import { BaseTools } from './common';\n/**\n * 滚动条导轨，可自行创建使用\n */\nexport class Rail extends BaseTools {\n    targetEl;\n    railEl;\n    railContainerEl;\n    thumbEl;\n    targetIsWidow = false;\n    isX__ = true;\n    keepShow__ = false;\n    stopClickPropagation = false;\n    isTransitioning = false;\n    isDragging__ = false;\n    isHover__ = false;\n    isTargetHover__ = false;\n    proportion__ = 0;\n    startX = 0;\n    startY = 0;\n    handleMousedown_;\n    handleMouseMove_;\n    handleMouseUp_;\n    handleClick_;\n    handleScroll_;\n    handleMouseEnter_;\n    handleMouseLeave_;\n    handleTargetMouseEnter_;\n    handleTargetMouseLeave_;\n    constructor(option) {\n        super();\n        this.railEl = document.createElement('div');\n        this.railContainerEl = document.createElement('div');\n        this.thumbEl = document.createElement('div');\n        this.railEl.classList.add('dumogu-scrollbar-target-rail');\n        this.railContainerEl.classList.add('dumogu-scrollbar-target-rail-container');\n        this.thumbEl.classList.add('dumogu-scrollbar-target-thumb');\n        this.railEl.classList.add('hidden');\n        this.railEl.appendChild(this.railContainerEl);\n        this.railContainerEl.appendChild(this.thumbEl);\n        this.stopClickPropagation = option.stopClickPropagation;\n        this.isX = option.isX;\n        this.keepShow = option.keepShow;\n    }\n    /** 将滚动条与一个元素绑定 */\n    bind(targetEl) {\n        if (this.isDestroyed) return;\n        this.targetEl = targetEl;\n        this.targetIsWidow = !targetEl;\n        this.removeEventListener();\n        this.addEventListener();\n    }\n    set isX(value) {\n        this.isX__ = value;\n        this.setupActionClass();\n    }\n    get isX() {\n        return this.isX__;\n    }\n    set keepShow(value) {\n        this.keepShow__ = value;\n        this.setupActionClass();\n    }\n    get keepShow() {\n        return this.keepShow__;\n    }\n    set isDragging(value) {\n        this.isDragging__ = value;\n        this.setupActionClass();\n    }\n    get isDragging() {\n        return this.isDragging__;\n    }\n    set isHover(value) {\n        this.isHover__ = value;\n        this.setupActionClass();\n    }\n    get isHover() {\n        return this.isHover__;\n    }\n    set isTargetHover(value) {\n        this.isTargetHover__ = value;\n        this.setupActionClass();\n    }\n    get isTargetHover() {\n        return this.isTargetHover__;\n    }\n    set proportion(value) {\n        this.proportion__ = value;\n        this.setupHidden();\n        this.setupPosition();\n    }\n    get proportion() {\n        return this.proportion__;\n    }\n    setupHidden() {\n        if (this.isDestroyed) return;\n        const railEl = this.railEl;\n        if (this.proportion >= 1) {\n            railEl.classList.add('hidden');\n        } else {\n            railEl.classList.remove('hidden');\n        }\n    }\n    setupActionClass() {\n        if (this.isDestroyed) return;\n        const railEl = this.railEl;\n        const railContainerEl = this.railContainerEl;\n        const thumbEl = this.thumbEl;\n        if (this.keepShow) {\n            railEl.classList.add('keep-show');\n        } else {\n            railEl.classList.remove('keep-show');\n        }\n        if (this.isDragging) {\n            railEl.classList.add('dragging');\n        } else {\n            railEl.classList.remove('dragging');\n        }\n        if (this.isHover) {\n            railEl.classList.add('hover');\n        } else {\n            railEl.classList.remove('hover');\n        }\n        if (this.isTargetHover) {\n            railEl.classList.add('target-hover');\n        } else {\n            railEl.classList.remove('target-hover');\n        }\n        if (this.isX) {\n            railEl.classList.remove('y');\n            railContainerEl.classList.remove('y');\n            thumbEl.classList.remove('y');\n            railEl.classList.add('x');\n            railContainerEl.classList.add('x');\n            thumbEl.classList.add('x');\n        } else {\n            railEl.classList.remove('x');\n            railContainerEl.classList.remove('x');\n            thumbEl.classList.remove('x');\n            railEl.classList.add('y');\n            railContainerEl.classList.add('y');\n            thumbEl.classList.add('y');\n        }\n    }\n    /** 获取目标元素的属性 */\n    getTargetAttributes() {\n        const targetEl = this.targetEl;\n        let clientSize = 0;\n        let scrollSize = 0;\n        let scrollStart = 0;\n        if (this.isX) {\n            clientSize = this.targetIsWidow ? window.innerWidth : targetEl.clientWidth;\n            scrollSize = this.targetIsWidow\n                ? document.documentElement.scrollWidth\n                : targetEl.scrollWidth;\n            scrollStart = this.targetIsWidow ? window.scrollX : targetEl.scrollLeft;\n        } else {\n            clientSize = this.targetIsWidow ? window.innerHeight : targetEl.clientHeight;\n            scrollSize = this.targetIsWidow\n                ? document.documentElement.scrollHeight\n                : targetEl.scrollHeight;\n            scrollStart = this.targetIsWidow ? window.scrollY : targetEl.scrollTop;\n        }\n        return {\n            clientSize,\n            scrollSize,\n            scrollStart,\n        };\n    }\n    /** 设置目标元素滚动位置 */\n    targetScrollTo(start) {\n        if (this.isDestroyed) return;\n        const targetEl = this.targetEl;\n        if (this.isX) {\n            if (this.targetIsWidow) {\n                window.scrollTo(start, window.scrollY);\n            } else {\n                targetEl.scrollLeft = start;\n            }\n        } else {\n            if (this.targetIsWidow) {\n                window.scrollTo(window.scrollX, start);\n            } else {\n                targetEl.scrollTop = start;\n            }\n        }\n    }\n    /** 更新样式 */\n    update() {\n        this.computedProportion();\n    }\n    /** 计算比例，滚动比例(采用空白区域的计算方式) */\n    computedProportion() {\n        if (this.isDestroyed) return;\n        const targetAttributes = this.getTargetAttributes();\n        let proportion = 0;\n        let scrollProportion = 0;\n        proportion = targetAttributes.clientSize / targetAttributes.scrollSize;\n        scrollProportion =\n            targetAttributes.scrollStart /\n            (targetAttributes.scrollSize - targetAttributes.clientSize);\n        this.scrollProportion = Math.min(scrollProportion, 1);\n        this.proportion = Math.min(proportion, 1);\n    }\n    /** 设置滚动条显示的位置 */\n    setupPosition() {\n        if (this.isDestroyed) return;\n        const railContainerEl = this.railContainerEl;\n        const thumbEl = this.thumbEl;\n        const proportion = this.proportion;\n        const scrollProportion = this.scrollProportion;\n        const railClientSize = this.isX\n            ? railContainerEl.clientWidth\n            : railContainerEl.clientHeight;\n        const size = Math.max(railClientSize * proportion, 30); // 设置最小size\n        const start = (((railClientSize - size) * scrollProportion) / railClientSize) * 100;\n        if (this.isX) {\n            thumbEl.style.width = size + 'px';\n            thumbEl.style.left = start + '%';\n        } else {\n            thumbEl.style.height = size + 'px';\n            thumbEl.style.top = start + '%';\n        }\n    }\n    handleMousedown(e) {\n        if (this.isDestroyed) return;\n        this.isDragging = true;\n        this.startX = e.x;\n        this.startY = e.y;\n    }\n    handleMouseMove(e) {\n        if (this.isDestroyed) return;\n        if (!this.isDragging) return;\n        const targetAttributes = this.getTargetAttributes();\n        const railContainerEl = this.railContainerEl;\n        const railContainerElRect = railContainerEl.getBoundingClientRect();\n        const thumbEl = this.thumbEl;\n        let deltaLength = 0;\n        const currentX = e.x;\n        const currentY = e.y;\n        if (this.isX) {\n            deltaLength = currentX - this.startX;\n            this.startX = currentX;\n            if (targetAttributes.scrollStart == 0 && currentX < railContainerElRect.x) return;\n            if (\n                targetAttributes.scrollStart + targetAttributes.clientSize >=\n                targetAttributes.scrollSize\n            ) {\n                if (currentX >= railContainerElRect.x + railContainerElRect.width) {\n                    return;\n                }\n            }\n            const width =\n                (deltaLength / (railContainerEl.clientWidth - thumbEl.offsetWidth)) *\n                (targetAttributes.scrollSize - targetAttributes.clientSize);\n            this.targetScrollTo(targetAttributes.scrollStart + width);\n        } else {\n            deltaLength = currentY - this.startY;\n            this.startY = currentY;\n            if (targetAttributes.scrollStart == 0 && currentY < railContainerElRect.y) return;\n            if (\n                targetAttributes.scrollStart + targetAttributes.clientSize >=\n                targetAttributes.scrollSize\n            ) {\n                if (currentY >= railContainerElRect.y + railContainerElRect.height) {\n                    return;\n                }\n            }\n            const height =\n                (deltaLength / (railContainerEl.clientHeight - thumbEl.offsetHeight)) *\n                (targetAttributes.scrollSize - targetAttributes.clientSize);\n            this.targetScrollTo(targetAttributes.scrollStart + height);\n        }\n    }\n    handleMouseUp() {\n        if (this.isDestroyed) return;\n        this.isDragging = false;\n    }\n    handleScroll() {\n        if (this.isDestroyed) return;\n        this.computedProportion();\n    }\n    handleClick(e) {\n        if (this.isDestroyed) return;\n        if (this.stopClickPropagation) {\n            e.stopPropagation();\n        }\n        const targetAttributes = this.getTargetAttributes();\n        const thumbEl = this.thumbEl;\n        const thumbElRect = thumbEl.getBoundingClientRect();\n        let isAdd = false;\n        if (this.isX) {\n            if (e.x > thumbElRect.x + thumbElRect.width) {\n                isAdd = true;\n            }\n        } else {\n            if (e.y > thumbElRect.y + thumbElRect.width) {\n                isAdd = true;\n            }\n        }\n        if (isAdd) {\n            this.targetScrollTo(targetAttributes.scrollStart + targetAttributes.clientSize);\n        } else {\n            this.targetScrollTo(targetAttributes.scrollStart - targetAttributes.clientSize);\n        }\n    }\n    handleMouseEnter() {\n        this.isHover = true;\n        this.computedProportion();\n    }\n    handleMouseLeave() {\n        this.isHover = false;\n        this.computedProportion();\n    }\n    handleTransitionStart(e) {\n        const railEl = this.railEl;\n        if (!e || e.target !== railEl) return;\n        this.isTransitioning = true;\n        this.computedProportion();\n    }\n    handleTransitionEnd(e) {\n        const railEl = this.railEl;\n        if (!e || e.target !== railEl) return;\n        this.isTransitioning = false;\n        this.computedProportion();\n    }\n    handleTargetMouseEnter() {\n        this.isTargetHover = true;\n        this.computedProportion();\n    }\n    handleTargetMouseLeave() {\n        this.isTargetHover = false;\n        this.computedProportion();\n    }\n    addEventListener() {\n        const targetEl = this.targetEl;\n        const railEl = this.railEl;\n        const thumbEl = this.thumbEl;\n        const railContainerEl = this.railContainerEl;\n        const that = this;\n        that.handleMousedown_ = function (e) {\n            that.handleMousedown(e);\n        };\n        that.handleMouseMove_ = function (e) {\n            that.handleMouseMove(e);\n        };\n        that.handleMouseUp_ = function (e) {\n            that.handleMouseUp(e);\n        };\n        that.handleScroll_ = function (e) {\n            that.handleScroll(e);\n        };\n        that.handleClick_ = function (e) {\n            that.handleClick(e);\n        };\n        that.handleMouseEnter_ = function (e) {\n            that.handleMouseEnter(e);\n        };\n        that.handleMouseLeave_ = function (e) {\n            that.handleMouseLeave(e);\n        };\n        that.handleTransitionStart_ = function (e) {\n            that.handleTransitionStart(e);\n        };\n        that.handleTransitionEnd_ = function (e) {\n            that.handleTransitionEnd(e);\n        };\n        that.handleTargetMouseEnter_ = function (e) {\n            that.handleTargetMouseEnter(e);\n        };\n        that.handleTargetMouseLeave_ = function (e) {\n            that.handleTargetMouseLeave(e);\n        };\n        thumbEl.addEventListener('mousedown', that.handleMousedown_);\n        document.addEventListener('mousemove', that.handleMouseMove_);\n        document.addEventListener('mouseup', that.handleMouseUp_);\n        railContainerEl.addEventListener('click', that.handleClick_);\n        if (this.targetIsWidow) {\n            window.addEventListener('scroll', that.handleScroll_);\n            document.addEventListener('mouseenter', that.handleTargetMouseEnter_);\n            document.addEventListener('mouseleave', that.handleTargetMouseLeave_);\n        } else {\n            targetEl.addEventListener('scroll', that.handleScroll_);\n            targetEl.addEventListener('mouseenter', that.handleTargetMouseEnter_);\n            targetEl.addEventListener('mouseleave', that.handleTargetMouseLeave_);\n        }\n        railEl.addEventListener('mouseenter', that.handleMouseEnter_);\n        railEl.addEventListener('mouseleave', that.handleMouseLeave_);\n        railEl.addEventListener('transitionstart', that.handleTransitionStart_);\n        railEl.addEventListener('transitionend', that.handleTransitionEnd_);\n    }\n    removeEventListener() {\n        const targetEl = this.targetEl;\n        const railEl = this.railEl;\n        const thumbEl = this.thumbEl;\n        const railContainerEl = this.railContainerEl;\n        thumbEl.removeEventListener('mousedown', this.handleMousedown_);\n        document.removeEventListener('mousemove', this.handleMouseMove_);\n        document.removeEventListener('mouseup', this.handleMouseUp_);\n        railContainerEl.removeEventListener('click', this.handleClick_);\n        if (this.targetIsWidow) {\n            window.removeEventListener('scroll', this.handleScroll_);\n            document.removeEventListener('mouseenter', this.handleTargetMouseEnter_);\n            document.removeEventListener('mouseleave', this.handleTargetMouseLeave_);\n        } else {\n            targetEl.removeEventListener('scroll', this.handleScroll_);\n            targetEl.removeEventListener('mouseenter', this.handleTargetMouseEnter_);\n            targetEl.removeEventListener('mouseleave', this.handleTargetMouseLeave_);\n        }\n        railEl.removeEventListener('mouseenter', this.handleMouseEnter_);\n        railEl.removeEventListener('mouseleave', this.handleMouseLeave_);\n        railEl.removeEventListener('transitionstart', this.handleTransitionStart_);\n        railEl.removeEventListener('transitionend', this.handleTransitionEnd_);\n    }\n    destroy() {\n        if (this.isDestroyed) return;\n        super.unmount();\n        super.destroy();\n        this.removeEventListener();\n        this.railEl = undefined;\n        this.railContainerEl = undefined;\n        this.thumbEl = undefined;\n    }\n}\n","import { BaseTools, removeElement } from './common';\nimport { Rail } from './rail';\nexport * from './rail';\nexport class DumoguScrollbar extends BaseTools {\n    targetEl; // 所绑定的滚动目标\n    mountContainerEl; // 被挂载到的元素\n    mountedToBody = true; // 是否挂载到了body上\n    targetIsWidow = true; // 绑定的滚动目标是否是window\n    scrollbarEl;\n    scrollbarTargetEl;\n    railX;\n    railY;\n    constructor(option = {}) {\n        super();\n        this.scrollbarEl = document.createElement('div');\n        this.scrollbarTargetEl = document.createElement('div');\n        this.scrollbarEl.classList.add('dumogu-scrollbar');\n        this.scrollbarTargetEl.classList.add('dumogu-scrollbar-target');\n        this.railX = new Rail({\n            isX: true,\n            keepShow: option.keepShow,\n            stopClickPropagation: option.stopClickPropagation,\n        });\n        this.railY = new Rail({\n            isX: false,\n            keepShow: option.keepShow,\n            stopClickPropagation: option.stopClickPropagation,\n        });\n        this.scrollbarTargetEl.appendChild(this.railX.railEl);\n        this.scrollbarTargetEl.appendChild(this.railY.railEl);\n        this.scrollbarEl.appendChild(this.scrollbarTargetEl);\n    }\n    /** 将滚动条与一个元素绑定 */\n    bind(targetEl) {\n        if (this.isDestroyed) return;\n        this.targetEl = targetEl;\n        this.targetIsWidow = !targetEl;\n        this.railX.bind(targetEl);\n        this.railY.bind(targetEl);\n    }\n    /** 挂载到一个元素上 */\n    mount(mountContainerEl) {\n        if (this.isDestroyed) return;\n        super.mount();\n        this.mountContainerEl = mountContainerEl;\n        if (!mountContainerEl) {\n            document.body.appendChild(this.scrollbarEl);\n            this.mountedToBody = true;\n        } else {\n            mountContainerEl.appendChild(this.scrollbarEl);\n            this.mountedToBody = false;\n        }\n        this.setupActionClass();\n        this.computedPosition();\n    }\n    unmount() {\n        if (this.isDestroyed) return;\n        super.unmount();\n        removeElement(this.scrollbarEl);\n    }\n    /** 添加类名 */\n    setupActionClass() {\n        if (this.isDestroyed) return;\n        const scrollbarEl = this.scrollbarEl;\n        if (this.mountedToBody) {\n            scrollbarEl.classList.add('mounted-to-body');\n        } else {\n            scrollbarEl.classList.remove('mounted-to-body');\n        }\n        if (this.targetIsWidow) {\n            scrollbarEl.classList.add('is-window');\n        } else {\n            scrollbarEl.classList.remove('is-window');\n        }\n    }\n    /** 更新 */\n    update() {\n        if (this.isDestroyed) return;\n        this.computedPosition();\n        if (!this.railX.isDragging) {\n            this.railX.update();\n        }\n        if (!this.railY.isDragging) {\n            this.railY.update();\n        }\n    }\n    /** 计算位置 */\n    computedPosition() {\n        if (this.isDestroyed) return;\n        const targetEl = this.targetEl;\n        const mountContainerEl = this.mountContainerEl;\n        const scrollbarEl = this.scrollbarEl;\n        const scrollbarTargetEl = this.scrollbarTargetEl;\n        if (this.targetIsWidow) {\n            scrollbarTargetEl.style.width = '100%';\n            scrollbarTargetEl.style.height = '100%';\n            return;\n        }\n        if (this.mountedToBody) {\n            const targetElRect = targetEl.getBoundingClientRect();\n            scrollbarTargetEl.style.width = targetElRect.width + 'px';\n            scrollbarTargetEl.style.height = targetElRect.height + 'px';\n            scrollbarTargetEl.style.top = targetElRect.y + 'px';\n            scrollbarTargetEl.style.left = targetElRect.x + 'px';\n            return;\n        }\n        const scrollbarElRect = scrollbarEl.getBoundingClientRect();\n        const targetElRect = targetEl.getBoundingClientRect();\n        const mountContainerElRect = mountContainerEl.getBoundingClientRect();\n        scrollbarTargetEl.style.width = targetElRect.width + 'px';\n        scrollbarTargetEl.style.height = targetElRect.height + 'px';\n        scrollbarTargetEl.style.top =\n            targetElRect.y -\n            mountContainerElRect.y -\n            (scrollbarElRect.y - mountContainerElRect.y) +\n            'px';\n        scrollbarTargetEl.style.left =\n            targetElRect.x -\n            mountContainerElRect.x -\n            (scrollbarElRect.x - mountContainerElRect.x) +\n            'px';\n    }\n    destroy() {\n        if (this.isDestroyed) return;\n        this.unmount();\n        super.destroy();\n        this.railX.destroy();\n        this.railY.destroy();\n        this.railX = undefined;\n        this.railY = undefined;\n        this.targetEl = undefined;\n        this.mountContainerEl = undefined;\n        this.scrollbarEl = undefined;\n        this.scrollbarTargetEl = undefined;\n    }\n}\n"],"names":["BaseTools","isMounted","isDestroyed","constructor","destroy","this","mount","unmount","Rail","targetEl","railEl","railContainerEl","thumbEl","targetIsWidow","isX__","keepShow__","stopClickPropagation","isTransitioning","isDragging__","isHover__","isTargetHover__","proportion__","startX","startY","handleMousedown_","handleMouseMove_","handleMouseUp_","handleClick_","handleScroll_","handleMouseEnter_","handleMouseLeave_","handleTargetMouseEnter_","handleTargetMouseLeave_","option","super","document","createElement","classList","add","appendChild","isX","keepShow","bind","removeEventListener","addEventListener","value","setupActionClass","isDragging","isHover","isTargetHover","proportion","setupHidden","setupPosition","remove","getTargetAttributes","clientSize","scrollSize","scrollStart","window","innerWidth","clientWidth","documentElement","scrollWidth","scrollX","scrollLeft","innerHeight","clientHeight","scrollHeight","scrollY","scrollTop","targetScrollTo","start","scrollTo","update","computedProportion","targetAttributes","scrollProportion","Math","min","railClientSize","size","max","style","width","left","height","top","handleMousedown","e","x","y","handleMouseMove","railContainerElRect","getBoundingClientRect","deltaLength","currentX","currentY","offsetWidth","offsetHeight","handleMouseUp","handleScroll","handleClick","stopPropagation","thumbElRect","isAdd","handleMouseEnter","handleMouseLeave","handleTransitionStart","target","handleTransitionEnd","handleTargetMouseEnter","handleTargetMouseLeave","that","handleTransitionStart_","handleTransitionEnd_","undefined","DumoguScrollbar","mountContainerEl","mountedToBody","scrollbarEl","scrollbarTargetEl","railX","railY","body","computedPosition","element","parentNode","removeChild","targetElRect","scrollbarElRect","mountContainerElRect"],"mappings":"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"}