{"version":3,"file":"dumogu-scrollbar.umd.js","sources":["../src/common.js","../src/rail.js","../src/index.js"],"sourcesContent":["export function removeElement(element) {\n    if (element && element.parentNode) {\n        element.parentNode.removeChild(element);\n    }\n}\nexport function addElementClass(el, className) {\n    el.classList.add(className);\n}\nexport function removeElementClass(el, className) {\n    el.classList.remove(className);\n}\nexport function getElementRect(el) {\n    return el.getBoundingClientRect();\n}\nexport class BaseTools {\n    isMounted = false;\n    isDestroyed = false;\n    constructor() {}\n    destroy() {\n        this.isDestroyed = true;\n    }\n    mount() {\n        this.isMounted = true;\n    }\n    unmount() {\n        this.isMounted = false;\n    }\n}\n","import { BaseTools, addElementClass, removeElementClass, getElementRect } from './common';\n/**\n * 滚动条导轨，可自行创建使用\n */\nexport class Rail extends BaseTools {\n    targetEl;\n    railEl;\n    railContainerEl;\n    thumbEl;\n    targetIsWidow = false;\n    #isX__ = true;\n    #keepShow__ = false;\n    stopClickPropagation = false;\n    isTransitioning = false;\n    #isDragging__ = false;\n    #isHover__ = false;\n    #isTargetHover__ = false;\n    #proportion__ = 0;\n    startX = 0;\n    startY = 0;\n    #handleMousedown_;\n    #handleMouseMove_;\n    #handleMouseUp_;\n    #handleClick_;\n    #handleScroll_;\n    #handleMouseEnter_;\n    #handleMouseLeave_;\n    #handleTargetMouseEnter_;\n    #handleTargetMouseLeave_;\n    #handleTransitionStart_;\n    #handleTransitionEnd_;\n    constructor(option) {\n        super();\n        const railEl = document.createElement('div');\n        const railContainerEl = document.createElement('div');\n        const thumbEl = document.createElement('div');\n        addElementClass(railEl, 'dumogu-scrollbar-target-rail');\n        addElementClass(railContainerEl, 'dumogu-scrollbar-target-rail-container');\n        addElementClass(thumbEl, 'dumogu-scrollbar-target-thumb');\n        addElementClass(railEl, 'hidden');\n        railEl.appendChild(railContainerEl);\n        railContainerEl.appendChild(thumbEl);\n        this.railEl = railEl;\n        this.railContainerEl = railContainerEl;\n        this.thumbEl = thumbEl;\n        this.stopClickPropagation = option.stopClickPropagation;\n        this.isX = option.isX;\n        this.keepShow = option.keepShow;\n    }\n    /** 将滚动条与一个元素绑定 */\n    bind(targetEl) {\n        if (this.isDestroyed) return;\n        this.targetEl = targetEl;\n        this.targetIsWidow = !targetEl;\n        this.#removeEventListener();\n        this.#addEventListener();\n    }\n    set isX(value) {\n        this.#isX__ = value;\n        this.#setupActionClass();\n    }\n    get isX() {\n        return this.#isX__;\n    }\n    set keepShow(value) {\n        this.#keepShow__ = value;\n        this.#setupActionClass();\n    }\n    get keepShow() {\n        return this.#keepShow__;\n    }\n    set isDragging(value) {\n        this.#isDragging__ = value;\n        this.#setupActionClass();\n    }\n    get isDragging() {\n        return this.#isDragging__;\n    }\n    set isHover(value) {\n        this.#isHover__ = value;\n        this.#setupActionClass();\n    }\n    get isHover() {\n        return this.#isHover__;\n    }\n    set isTargetHover(value) {\n        this.#isTargetHover__ = value;\n        this.#setupActionClass();\n    }\n    get isTargetHover() {\n        return this.#isTargetHover__;\n    }\n    set proportion(value) {\n        this.#proportion__ = value;\n        this.#setupHidden();\n        this.#setupPosition();\n    }\n    get proportion() {\n        return this.#proportion__;\n    }\n    #setupHidden() {\n        if (this.isDestroyed) return;\n        const railEl = this.railEl;\n        if (this.proportion >= 1) {\n            addElementClass(railEl, 'hidden');\n        } else {\n            removeElementClass(railEl, 'hidden');\n        }\n    }\n    #setupActionClass() {\n        if (this.isDestroyed) return;\n        const railEl = this.railEl;\n        const railContainerEl = this.railContainerEl;\n        const thumbEl = this.thumbEl;\n        if (this.keepShow) {\n            addElementClass(railEl, 'keep-show');\n        } else {\n            removeElementClass(railEl, 'keep-show');\n        }\n        if (this.isDragging) {\n            addElementClass(railEl, 'dragging');\n        } else {\n            removeElementClass(railEl, 'dragging');\n        }\n        if (this.isHover) {\n            addElementClass(railEl, 'hover');\n        } else {\n            removeElementClass(railEl, 'hover');\n        }\n        if (this.isTargetHover) {\n            addElementClass(railEl, 'target-hover');\n        } else {\n            removeElementClass(railEl, 'target-hover');\n        }\n        if (this.isX) {\n            removeElementClass(railEl, 'y');\n            removeElementClass(railContainerEl, 'y');\n            removeElementClass(thumbEl, 'y');\n            addElementClass(railEl, 'x');\n            addElementClass(railContainerEl, 'x');\n            addElementClass(thumbEl, 'x');\n        } else {\n            removeElementClass(railEl, 'x');\n            removeElementClass(railContainerEl, 'x');\n            removeElementClass(thumbEl, 'x');\n            addElementClass(railEl, 'y');\n            addElementClass(railContainerEl, 'y');\n            addElementClass(thumbEl, 'y');\n        }\n    }\n    /** 获取目标元素的属性 */\n    #getTargetAttributes() {\n        const targetEl = this.targetEl;\n        const targetIsWidow = this.targetIsWidow;\n        let clientSize = 0;\n        let scrollSize = 0;\n        let scrollStart = 0;\n        if (this.isX) {\n            clientSize = targetIsWidow ? window.innerWidth : targetEl.clientWidth;\n            scrollSize = targetIsWidow\n                ? document.documentElement.scrollWidth\n                : targetEl.scrollWidth;\n            scrollStart = targetIsWidow ? window.scrollX : targetEl.scrollLeft;\n        } else {\n            clientSize = targetIsWidow ? window.innerHeight : targetEl.clientHeight;\n            scrollSize = targetIsWidow\n                ? document.documentElement.scrollHeight\n                : targetEl.scrollHeight;\n            scrollStart = targetIsWidow ? window.scrollY : targetEl.scrollTop;\n        }\n        return {\n            clientSize,\n            scrollSize,\n            scrollStart,\n        };\n    }\n    /** 设置目标元素滚动位置 */\n    #targetScrollTo(start) {\n        if (this.isDestroyed) return;\n        const targetEl = this.targetEl;\n        const targetIsWidow = this.targetIsWidow;\n        if (this.isX) {\n            if (targetIsWidow) {\n                window.scrollTo(start, window.scrollY);\n            } else {\n                targetEl.scrollLeft = start;\n            }\n        } else {\n            if (targetIsWidow) {\n                window.scrollTo(window.scrollX, start);\n            } else {\n                targetEl.scrollTop = start;\n            }\n        }\n    }\n    /** 更新样式 */\n    update() {\n        this.#computedProportion();\n    }\n    /** 计算比例，滚动比例(采用空白区域的计算方式) */\n    #computedProportion() {\n        if (this.isDestroyed) return;\n        const targetAttributes = this.#getTargetAttributes();\n        let proportion = 0;\n        let scrollProportion = 0;\n        proportion = targetAttributes.clientSize / targetAttributes.scrollSize;\n        scrollProportion =\n            targetAttributes.scrollStart /\n            (targetAttributes.scrollSize - targetAttributes.clientSize);\n        this.scrollProportion = Math.min(scrollProportion, 1);\n        this.proportion = Math.min(proportion, 1);\n    }\n    /** 设置滚动条显示的位置 */\n    #setupPosition() {\n        if (this.isDestroyed) return;\n        const railContainerEl = this.railContainerEl;\n        const thumbEl = this.thumbEl;\n        const proportion = this.proportion;\n        const scrollProportion = this.scrollProportion;\n        const railClientSize = this.isX\n            ? railContainerEl.clientWidth\n            : railContainerEl.clientHeight;\n        const size = Math.max(railClientSize * proportion, 30); // 设置最小size\n        const start = (((railClientSize - size) * scrollProportion) / railClientSize) * 100;\n        if (this.isX) {\n            thumbEl.style.width = size + 'px';\n            thumbEl.style.left = start + '%';\n        } else {\n            thumbEl.style.height = size + 'px';\n            thumbEl.style.top = start + '%';\n        }\n    }\n    #handleMousedown(e) {\n        if (this.isDestroyed) return;\n        this.isDragging = true;\n        this.startX = e.x;\n        this.startY = e.y;\n    }\n    #handleMouseMove(e) {\n        if (this.isDestroyed) return;\n        if (!this.isDragging) return;\n        const targetAttributes = this.#getTargetAttributes();\n        const railContainerEl = this.railContainerEl;\n        const railContainerElRect = getElementRect(railContainerEl);\n        const thumbEl = this.thumbEl;\n        let deltaLength = 0;\n        const currentX = e.x;\n        const currentY = e.y;\n        if (this.isX) {\n            deltaLength = currentX - this.startX;\n            this.startX = currentX;\n            if (targetAttributes.scrollStart == 0 && currentX < railContainerElRect.x) return;\n            if (\n                targetAttributes.scrollStart + targetAttributes.clientSize >=\n                targetAttributes.scrollSize\n            ) {\n                if (currentX >= railContainerElRect.x + railContainerElRect.width) {\n                    return;\n                }\n            }\n            const width =\n                (deltaLength / (railContainerEl.clientWidth - thumbEl.offsetWidth)) *\n                (targetAttributes.scrollSize - targetAttributes.clientSize);\n            this.#targetScrollTo(targetAttributes.scrollStart + width);\n        } else {\n            deltaLength = currentY - this.startY;\n            this.startY = currentY;\n            if (targetAttributes.scrollStart == 0 && currentY < railContainerElRect.y) return;\n            if (\n                targetAttributes.scrollStart + targetAttributes.clientSize >=\n                targetAttributes.scrollSize\n            ) {\n                if (currentY >= railContainerElRect.y + railContainerElRect.height) {\n                    return;\n                }\n            }\n            const height =\n                (deltaLength / (railContainerEl.clientHeight - thumbEl.offsetHeight)) *\n                (targetAttributes.scrollSize - targetAttributes.clientSize);\n            this.#targetScrollTo(targetAttributes.scrollStart + height);\n        }\n    }\n    #handleMouseUp() {\n        if (this.isDestroyed) return;\n        this.isDragging = false;\n    }\n    #handleScroll() {\n        if (this.isDestroyed) return;\n        this.#computedProportion();\n    }\n    #handleClick(e) {\n        if (this.isDestroyed) return;\n        if (this.stopClickPropagation) {\n            e.stopPropagation();\n        }\n        const targetAttributes = this.#getTargetAttributes();\n        const thumbEl = this.thumbEl;\n        const thumbElRect = getElementRect(thumbEl);\n        let isAdd = false;\n        if (this.isX) {\n            if (e.x > thumbElRect.x + thumbElRect.width) {\n                isAdd = true;\n            }\n        } else {\n            if (e.y > thumbElRect.y + thumbElRect.width) {\n                isAdd = true;\n            }\n        }\n        if (isAdd) {\n            this.#targetScrollTo(targetAttributes.scrollStart + targetAttributes.clientSize);\n        } else {\n            this.#targetScrollTo(targetAttributes.scrollStart - targetAttributes.clientSize);\n        }\n    }\n    #handleMouseEnter() {\n        this.isHover = true;\n        this.#computedProportion();\n    }\n    #handleMouseLeave() {\n        this.isHover = false;\n        this.#computedProportion();\n    }\n    #handleTransitionStart(e) {\n        const railEl = this.railEl;\n        if (!e || e.target !== railEl || e.propertyName !== 'opacity') return;\n        this.isTransitioning = true;\n        this.#computedProportion();\n    }\n    #handleTransitionEnd(e) {\n        const railEl = this.railEl;\n        if (!e || e.target !== railEl || e.propertyName !== 'opacity') return;\n        this.isTransitioning = false;\n        this.#computedProportion();\n    }\n    #handleTargetMouseEnter() {\n        this.isTargetHover = true;\n        this.#computedProportion();\n    }\n    #handleTargetMouseLeave() {\n        this.isTargetHover = false;\n        this.#computedProportion();\n    }\n    #addEventListener() {\n        const targetEl = this.targetEl;\n        const railEl = this.railEl;\n        const thumbEl = this.thumbEl;\n        const railContainerEl = this.railContainerEl;\n        const that = this;\n        that.#handleMousedown_ = function (e) {\n            that.#handleMousedown(e);\n        };\n        that.#handleMouseMove_ = function (e) {\n            that.#handleMouseMove(e);\n        };\n        that.#handleMouseUp_ = function (e) {\n            that.#handleMouseUp(e);\n        };\n        that.#handleScroll_ = function (e) {\n            that.#handleScroll(e);\n        };\n        that.#handleClick_ = function (e) {\n            that.#handleClick(e);\n        };\n        that.#handleMouseEnter_ = function (e) {\n            that.#handleMouseEnter(e);\n        };\n        that.#handleMouseLeave_ = function (e) {\n            that.#handleMouseLeave(e);\n        };\n        that.#handleTransitionStart_ = function (e) {\n            that.#handleTransitionStart(e);\n        };\n        that.#handleTransitionEnd_ = function (e) {\n            that.#handleTransitionEnd(e);\n        };\n        that.#handleTargetMouseEnter_ = function (e) {\n            that.#handleTargetMouseEnter(e);\n        };\n        that.#handleTargetMouseLeave_ = function (e) {\n            that.#handleTargetMouseLeave(e);\n        };\n        const fnName = 'addEventListener';\n        thumbEl[fnName]('mousedown', that.#handleMousedown_);\n        document[fnName]('mousemove', that.#handleMouseMove_);\n        document[fnName]('mouseup', that.#handleMouseUp_);\n        railContainerEl[fnName]('click', that.#handleClick_);\n        if (this.targetIsWidow) {\n            window[fnName]('scroll', that.#handleScroll_);\n            document[fnName]('mouseenter', that.#handleTargetMouseEnter_);\n            document[fnName]('mouseleave', that.#handleTargetMouseLeave_);\n        } else {\n            targetEl[fnName]('scroll', that.#handleScroll_);\n            targetEl[fnName]('mouseenter', that.#handleTargetMouseEnter_);\n            targetEl[fnName]('mouseleave', that.#handleTargetMouseLeave_);\n        }\n        railEl[fnName]('mouseenter', that.#handleMouseEnter_);\n        railEl[fnName]('mouseleave', that.#handleMouseLeave_);\n        railEl[fnName]('transitionstart', that.#handleTransitionStart_);\n        railEl[fnName]('transitionend', that.#handleTransitionEnd_);\n    }\n    #removeEventListener() {\n        const targetEl = this.targetEl;\n        const railEl = this.railEl;\n        const thumbEl = this.thumbEl;\n        const railContainerEl = this.railContainerEl;\n        const fnName = 'removeEventListener';\n        thumbEl[fnName]('mousedown', this.#handleMousedown_);\n        document[fnName]('mousemove', this.#handleMouseMove_);\n        document[fnName]('mouseup', this.#handleMouseUp_);\n        railContainerEl[fnName]('click', this.#handleClick_);\n        if (this.targetIsWidow) {\n            window[fnName]('scroll', this.#handleScroll_);\n            document[fnName]('mouseenter', this.#handleTargetMouseEnter_);\n            document[fnName]('mouseleave', this.#handleTargetMouseLeave_);\n        } else {\n            targetEl[fnName]('scroll', this.#handleScroll_);\n            targetEl[fnName]('mouseenter', this.#handleTargetMouseEnter_);\n            targetEl[fnName]('mouseleave', this.#handleTargetMouseLeave_);\n        }\n        railEl[fnName]('mouseenter', this.#handleMouseEnter_);\n        railEl[fnName]('mouseleave', this.#handleMouseLeave_);\n        railEl[fnName]('transitionstart', this.#handleTransitionStart_);\n        railEl[fnName]('transitionend', this.#handleTransitionEnd_);\n    }\n    destroy() {\n        if (this.isDestroyed) return;\n        super.unmount();\n        super.destroy();\n        this.#removeEventListener();\n        this.railEl = undefined;\n        this.railContainerEl = undefined;\n        this.thumbEl = undefined;\n        this.#handleMousedown_ = undefined;\n        this.#handleMouseMove_ = undefined;\n        this.#handleMouseUp_ = undefined;\n        this.#handleClick_ = undefined;\n        this.#handleScroll_ = undefined;\n        this.#handleMouseEnter_ = undefined;\n        this.#handleMouseLeave_ = undefined;\n        this.#handleTargetMouseEnter_ = undefined;\n        this.#handleTargetMouseLeave_ = undefined;\n        this.#handleTransitionStart_ = undefined;\n        this.#handleTransitionEnd_ = undefined;\n    }\n}\n","import {\n    BaseTools,\n    removeElement,\n    addElementClass,\n    removeElementClass,\n    getElementRect,\n} from './common';\nimport { Rail } from './rail';\nexport * from './rail';\nexport class DumoguScrollbar extends BaseTools {\n    targetEl; // 所绑定的滚动目标\n    mountContainerEl; // 被挂载到的元素\n    mountedToBody = true; // 是否挂载到了body上\n    targetIsWidow = true; // 绑定的滚动目标是否是window\n    scrollbarEl;\n    scrollbarTargetEl;\n    railX;\n    railY;\n    constructor(option = {}) {\n        super();\n        const scrollbarEl = document.createElement('div');\n        const scrollbarTargetEl = document.createElement('div');\n        const railX = new Rail({\n            isX: true,\n            keepShow: option.keepShow,\n            stopClickPropagation: option.stopClickPropagation,\n        });\n        const railY = new Rail({\n            isX: false,\n            keepShow: option.keepShow,\n            stopClickPropagation: option.stopClickPropagation,\n        });\n        addElementClass(scrollbarEl, 'dumogu-scrollbar');\n        addElementClass(scrollbarTargetEl, 'dumogu-scrollbar-target');\n        scrollbarTargetEl.appendChild(railX.railEl);\n        scrollbarTargetEl.appendChild(railY.railEl);\n        scrollbarEl.appendChild(scrollbarTargetEl);\n        this.scrollbarEl = scrollbarEl;\n        this.scrollbarTargetEl = scrollbarTargetEl;\n        this.railX = railX;\n        this.railY = railY;\n    }\n    /** 将滚动条与一个元素绑定 */\n    bind(targetEl) {\n        if (this.isDestroyed) return;\n        this.targetEl = targetEl;\n        this.targetIsWidow = !targetEl;\n        this.railX.bind(targetEl);\n        this.railY.bind(targetEl);\n    }\n    /** 挂载到一个元素上 */\n    mount(mountContainerEl) {\n        if (this.isDestroyed) return;\n        super.mount();\n        this.mountContainerEl = mountContainerEl;\n        if (!mountContainerEl) {\n            document.body.appendChild(this.scrollbarEl);\n            this.mountedToBody = true;\n        } else {\n            mountContainerEl.appendChild(this.scrollbarEl);\n            this.mountedToBody = false;\n        }\n        this.#setupActionClass();\n        this.#computedPosition();\n    }\n    unmount() {\n        if (this.isDestroyed) return;\n        super.unmount();\n        removeElement(this.scrollbarEl);\n    }\n    /** 添加类名 */\n    #setupActionClass() {\n        if (this.isDestroyed) return;\n        const scrollbarEl = this.scrollbarEl;\n        if (this.mountedToBody) {\n            addElementClass(scrollbarEl, 'mounted-to-body');\n        } else {\n            removeElementClass(scrollbarEl, 'mounted-to-body');\n        }\n        if (this.targetIsWidow) {\n            addElementClass(scrollbarEl, 'is-window');\n        } else {\n            removeElementClass(scrollbarEl, 'is-window');\n        }\n    }\n    /** 更新 */\n    update() {\n        if (this.isDestroyed) return;\n        const railX = this.railX;\n        const railY = this.railY;\n        this.#computedPosition();\n        if (!railX.isDragging) {\n            railX.update();\n        }\n        if (!railY.isDragging) {\n            railY.update();\n        }\n    }\n    /** 计算位置 */\n    #computedPosition() {\n        if (this.isDestroyed) return;\n        const targetEl = this.targetEl;\n        const mountContainerEl = this.mountContainerEl;\n        const scrollbarEl = this.scrollbarEl;\n        const scrollbarTargetEl = this.scrollbarTargetEl;\n        if (this.targetIsWidow) {\n            scrollbarTargetEl.style.width = '100%';\n            scrollbarTargetEl.style.height = '100%';\n            return;\n        }\n        if (this.mountedToBody) {\n            const targetElRect = getElementRect(targetEl);\n            scrollbarTargetEl.style.width = targetElRect.width + 'px';\n            scrollbarTargetEl.style.height = targetElRect.height + 'px';\n            scrollbarTargetEl.style.top = targetElRect.y + 'px';\n            scrollbarTargetEl.style.left = targetElRect.x + 'px';\n            return;\n        }\n        const scrollbarElRect = getElementRect(scrollbarEl);\n        const targetElRect = getElementRect(targetEl);\n        const mountContainerElRect = getElementRect(mountContainerEl);\n        scrollbarTargetEl.style.width = targetElRect.width + 'px';\n        scrollbarTargetEl.style.height = targetElRect.height + 'px';\n        scrollbarTargetEl.style.top =\n            targetElRect.y -\n            mountContainerElRect.y -\n            (scrollbarElRect.y - mountContainerElRect.y) +\n            'px';\n        scrollbarTargetEl.style.left =\n            targetElRect.x -\n            mountContainerElRect.x -\n            (scrollbarElRect.x - mountContainerElRect.x) +\n            'px';\n    }\n    destroy() {\n        if (this.isDestroyed) return;\n        this.unmount();\n        super.destroy();\n        this.railX.destroy();\n        this.railY.destroy();\n        this.railX = undefined;\n        this.railY = undefined;\n        this.targetEl = undefined;\n        this.mountContainerEl = undefined;\n        this.scrollbarEl = undefined;\n        this.scrollbarTargetEl = undefined;\n    }\n}\n"],"names":["addElementClass","el","className","classList","add","removeElementClass","remove","getElementRect","getBoundingClientRect","BaseTools","isMounted","isDestroyed","constructor","destroy","this","mount","unmount","Rail","targetEl","railEl","railContainerEl","thumbEl","targetIsWidow","isX__","keepShow__","stopClickPropagation","isTransitioning","isDragging__","isHover__","isTargetHover__","proportion__","startX","startY","handleMousedown_","handleMouseMove_","handleMouseUp_","handleClick_","handleScroll_","handleMouseEnter_","handleMouseLeave_","handleTargetMouseEnter_","handleTargetMouseLeave_","handleTransitionStart_","handleTransitionEnd_","option","super","document","createElement","appendChild","isX","keepShow","bind","removeEventListener","addEventListener","value","setupActionClass","isDragging","isHover","isTargetHover","proportion","setupHidden","setupPosition","getTargetAttributes","clientSize","scrollSize","scrollStart","window","innerWidth","clientWidth","documentElement","scrollWidth","scrollX","scrollLeft","innerHeight","clientHeight","scrollHeight","scrollY","scrollTop","targetScrollTo","start","scrollTo","update","computedProportion","targetAttributes","scrollProportion","Math","min","railClientSize","size","max","style","width","left","height","top","handleMousedown","e","x","y","handleMouseMove","railContainerElRect","deltaLength","currentX","currentY","offsetWidth","offsetHeight","handleMouseUp","handleScroll","handleClick","stopPropagation","thumbElRect","isAdd","handleMouseEnter","handleMouseLeave","handleTransitionStart","target","propertyName","handleTransitionEnd","handleTargetMouseEnter","handleTargetMouseLeave","that","fnName","undefined","mountContainerEl","mountedToBody","scrollbarEl","scrollbarTargetEl","railX","railY","body","computedPosition","element","parentNode","removeChild","targetElRect","scrollbarElRect","mountContainerElRect"],"mappings":"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"}